# Telegram-бот прогнозирования тренда валют  
**Версия 3.0**  



## Описание проекта  

Бот анализирует курсы иностранных валют к рублю и предсказывает, пойдёт курс вверх или вниз на следующий день.  
Исходные данные — официальные курсы Центрального банка РФ.  
Прогнозы формируются с помощью машинного обучения и сопровождаются пояснениями.


## Эволюция проекта  

### Версия 2.0  
Простой детерминированный прогноз на основе сравнения курсов за два последних рабочих дня.  
Если курс сегодня выше, чем вчера — прогноз «вверх», иначе — «вниз».  
Реализовано в одном Python-файле.  
Не использует машинное обучение.  

### Версия 3.0  
Полная переработка архитектуры:

- Добавлена поддержка всех валют, доступных в API ЦБ РФ (более 30).  
- Внедрена единая модель машинного обучения для всех валют.  
- Модель: Random Forest с калибровкой вероятностей.  
- Используются четыре признака: изменение за день, скользящее среднее, волатильность, индекс относительной силы (RSI).  
- Перед прогнозом выводится расширенная аналитика: текущий курс, динамика за 1/3/7 дней, уровень волатильности, RSI.  
- Добавлена команда /how с понятным описанием расчётов — повышает прозрачность и доверие.  
- Поддержка графиков: автоматическая генерация PNG с тенденцией и экстраполяцией.  
- Кэширование данных — снижает нагрузку на API и ускоряет ответ.  
- Единый исполняемый файл бота, легко запускается и развёртывается.


## Как запустить  

1. Установите зависимости:  
   pip install -r requirements.txt

2. Получите токен у @BotFather и вставьте его в v3_ml_model/bot.py (переменная TOKEN).

3. Запустите бота:  
   cd v3_ml_model  
   python bot.py

4. В Telegram напишите боту:  
   /start  
   /predict USD  

При первом запуске данные закэшируются в папку cache/.


## Команды  

/start — приветствие и описание  
/predict USD — прогноз для доллара (7 дней + ML + график)  
/predict EUR 10 — график евро за 10 дней  
/predict JPY 01.12–18.12 — график за период  
/list — список всех валют  
/how — как считается прогноз?  
/help — краткая справка  


## Прозрачность расчётов  

Все прогнозы сопровождаются пояснением:  
«чёткий сигнал (рост вчера, низкая волатильность)»  
или  
«неопределённо (противоречивые факторы)».  

Команда /how даёт полное описание:  
— откуда берутся данные,  
— какие признаки используются,  
— как работает модель,  
— как интерпретируется уверенность.  

Это делает систему объяснимой и понятной даже без технической подготовки.


## Технологии  

Python 3.9+  
python-telegram-bot  
scikit-learn  
matplotlib  
requests  
joblib  

Данные: API ЦБ РФ (https://cbr.ru/scripts/XML_daily.asp)  
Хостинг локальный

